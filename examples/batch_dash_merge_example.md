# æ‰¹é‡DASHåˆå¹¶ä½¿ç”¨ç¤ºä¾‹

## ğŸ¯ ä½¿ç”¨åœºæ™¯

å½“ä½ ä½¿ç”¨ `Segment2Motrix.js` ä¸‹è½½äº†å¤šä¸ªVRè§†é¢‘çš„DASHåˆ†æ®µåï¼Œé€šå¸¸ä¼šå¾—åˆ°å¦‚ä¸‹çš„ç›®å½•ç»“æ„ï¼š

```
C:\Users\carll\Desktop\catDownloads\
â”œâ”€â”€ Video1-Scene1/
â”‚   â”œâ”€â”€ init.mp4
â”‚   â”œâ”€â”€ P1-450.056-792.500-0001.m4s
â”‚   â”œâ”€â”€ P1-450.056-792.500-0002.m4s
â”‚   â”œâ”€â”€ P2-816.843-958.160-0003.m4s
â”‚   â””â”€â”€ ...
â”œâ”€â”€ Video1-Scene2/
â”‚   â”œâ”€â”€ init.mp4
â”‚   â”œâ”€â”€ P1-996.447-1267.604-0001.m4s
â”‚   â”œâ”€â”€ P1-996.447-1267.604-0002.m4s
â”‚   â””â”€â”€ ...
â”œâ”€â”€ Video2-FullLength/
â”‚   â”œâ”€â”€ init.mp4
â”‚   â”œâ”€â”€ P1-0.000-300.000-0001.m4s
â”‚   â”œâ”€â”€ P1-0.000-300.000-0002.m4s
â”‚   â””â”€â”€ ...
â””â”€â”€ ...
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. æ‰«æé¢„è§ˆï¼ˆæ¨èç¬¬ä¸€æ­¥ï¼‰

```bash
# æ‰«æç›®å½•ï¼ŒæŸ¥çœ‹æœ‰å“ªäº›DASHæ–‡ä»¶å¤¹
python vreconder.py dash-merge C:\Users\carll\Desktop\catDownloads --batch --dry-run
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
ğŸ” æ‰«æç›®å½•: C:\Users\carll\Desktop\catDownloads
================================================================================
ğŸ“ æ‰¾åˆ° 3 ä¸ªDASHæ–‡ä»¶å¤¹:
--------------------------------------------------------------------------------
  1. Video1-Scene1
     ğŸ“„ æ–‡ä»¶: 45 m4s + 1 init
     ğŸ“Š å¤§å°: 234.5 MB
     ğŸ¬ æ®µè½: 2 ä¸ª (P1, P2)

  2. Video1-Scene2
     ğŸ“„ æ–‡ä»¶: 32 m4s + 1 init
     ğŸ“Š å¤§å°: 187.2 MB
     ğŸ¬ æ®µè½: 1 ä¸ª (P1)

  3. Video2-FullLength
     ğŸ“„ æ–‡ä»¶: 120 m4s + 1 init
     ğŸ“Š å¤§å°: 892.7 MB
     ğŸ¬ æ®µè½: 1 ä¸ª (P1)

--------------------------------------------------------------------------------
ğŸ“Š æ€»è®¡: 3 æ–‡ä»¶å¤¹, 197 æ–‡ä»¶, 1314.4 MB
================================================================================

ğŸ” æ¨¡æ‹Ÿè¿è¡Œæ¨¡å¼ - ä¸ä¼šå®é™…å¤„ç†æ–‡ä»¶
```

### 2. å¼€å§‹æ‰¹é‡å¤„ç†

```bash
# ä½¿ç”¨4ä¸ªå¹¶è¡Œä»»åŠ¡å¤„ç†
python vreconder.py dash-merge C:\Users\carll\Desktop\catDownloads --batch --workers 4
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
ğŸ¬ VREconder æ‰¹é‡DASHåˆå¹¶
ğŸ“ è¾“å…¥ç›®å½•: C:\Users\carll\Desktop\catDownloads
ğŸ“ è¾“å‡ºç›®å½•: C:\Users\carll\Desktop\catDownloads\merged
ğŸ”§ å¹¶è¡Œä»»åŠ¡: 4

[æ‰«ææ‘˜è¦...]

ğŸ¤” ç¡®å®šè¦å¤„ç†è¿™ 3 ä¸ªæ–‡ä»¶å¤¹å—? (y/N): y

ğŸš€ å¼€å§‹æ‰¹é‡å¤„ç† (4 ä¸ªå¹¶è¡Œä»»åŠ¡)
================================================================================
âœ… [1/3] 33.3% | Video1-Scene1 | 15.2s
âœ… [2/3] 66.7% | Video1-Scene2 | 12.8s
âœ… [3/3] 100.0% | Video2-FullLength | 45.6s

================================================================================
ğŸ“Š æ‰¹é‡å¤„ç†å®Œæˆæ‘˜è¦
================================================================================
âœ… æˆåŠŸ: 3 ä¸ªæ–‡ä»¶å¤¹
âŒ å¤±è´¥: 0 ä¸ªæ–‡ä»¶å¤¹
ğŸ“ˆ æˆåŠŸç‡: 100.0%
â±ï¸  æ€»è€—æ—¶: 47.3 ç§’
ğŸ“„ å¤„ç†æ–‡ä»¶: 197 ä¸ª
ğŸ“Š å¤„ç†å¤§å°: 1314.4 MB
ğŸš€ å¹³å‡é€Ÿåº¦: 27.8 MB/s

ğŸ“‹ è¯¦ç»†æŠ¥å‘Š: C:\Users\carll\Desktop\catDownloads\merged\batch_dash_merge_report_20241201_143022.json
================================================================================
```

### 3. é«˜æ€§èƒ½å¤„ç†ï¼ˆæ›´å¤šå¹¶è¡Œä»»åŠ¡ï¼‰

```bash
# ä½¿ç”¨ä¸“ç”¨å·¥å…·ï¼Œ8ä¸ªå¹¶è¡Œä»»åŠ¡ï¼ŒæŒ‡å®šè¾“å‡ºç›®å½•
python tools/batch_dash_merge.py C:\Users\carll\Desktop\catDownloads -w 8 -o D:\ProcessedVideos
```

## ğŸ”§ é«˜çº§é€‰é¡¹

### å¹¶è¡Œä»»åŠ¡æ•°è°ƒæ•´

- **CPUå¯†é›†å‹åœºæ™¯**: ä½¿ç”¨ CPU æ ¸å¿ƒæ•°
- **å­˜å‚¨IOå—é™**: ä½¿ç”¨ 2-4 ä¸ªä»»åŠ¡
- **ç½‘ç»œå­˜å‚¨**: ä½¿ç”¨ 1-2 ä¸ªä»»åŠ¡

```bash
# æ ¹æ®ç³»ç»Ÿé…ç½®è°ƒæ•´
python vreconder.py dash-merge ./catDownloads --batch --workers 8  # 8æ ¸CPU
python vreconder.py dash-merge ./catDownloads --batch --workers 2  # æœºæ¢°ç¡¬ç›˜
```

### è¯¦ç»†è°ƒè¯•

```bash
# æ˜¾ç¤ºè¯¦ç»†çš„æ–‡ä»¶å¤„ç†é¡ºåºå’Œé”™è¯¯ä¿¡æ¯
python vreconder.py dash-merge ./single_folder --verbose
```

## ğŸ“‹ å¤„ç†æŠ¥å‘Š

æ¯æ¬¡æ‰¹é‡å¤„ç†åä¼šç”Ÿæˆè¯¦ç»†çš„JSONæŠ¥å‘Šï¼ŒåŒ…å«ï¼š

```json
{
  "summary": {
    "total_folders": 3,
    "successful": 3,
    "failed": 0,
    "success_rate": 100.0,
    "total_time_seconds": 47.3,
    "total_processing_time_seconds": 73.6,
    "total_files_processed": 197,
    "total_size_mb": 1314.4,
    "average_speed_mb_per_second": 27.8,
    "parallel_efficiency": 1.56,
    "timestamp": "2024-12-01T14:30:22"
  },
  "successful_folders": [...],
  "failed_folders": [...]
}
```

## â— å¸¸è§é—®é¢˜

### Q: å¦‚ä½•é€‰æ‹©åˆé€‚çš„å¹¶è¡Œä»»åŠ¡æ•°ï¼Ÿ
A: ä»4å¼€å§‹ï¼Œæ ¹æ®ç³»ç»Ÿæ€§èƒ½å’Œå­˜å‚¨ç±»å‹è°ƒæ•´ï¼š
- SSD + å¤šæ ¸CPU: 6-8
- æœºæ¢°ç¡¬ç›˜: 2-4 
- ç½‘ç»œå­˜å‚¨: 1-2

### Q: å¤„ç†å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
A: æ£€æŸ¥æŠ¥å‘Šæ–‡ä»¶ä¸­çš„é”™è¯¯ä¿¡æ¯ï¼Œç¡®ä¿ï¼š
- FFmpegå·²å®‰è£…
- æœ‰è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´
- æ–‡ä»¶å¤¹åŒ…å«æœ‰æ•ˆçš„m4sæ–‡ä»¶

### Q: å¯ä»¥ä¸­é€”åœæ­¢å—ï¼Ÿ
A: å¯ä»¥ï¼ŒæŒ‰Ctrl+Cä¸­æ–­ï¼Œå·²å®Œæˆçš„æ–‡ä»¶ä¸ä¼šä¸¢å¤±ã€‚

## ğŸ¬ ä¸Segment2Motrix.jsé…åˆä½¿ç”¨

1. ä½¿ç”¨ `Segment2Motrix.js` ä¸‹è½½DASHåˆ†æ®µåˆ° `catDownloads` ç›®å½•
2. è¿è¡Œ `python vreconder.py dash-merge catDownloads --batch --dry-run` é¢„è§ˆ
3. ç¡®è®¤æ— è¯¯åè¿è¡Œ `python vreconder.py dash-merge catDownloads --batch --workers 4` 
4. å¤„ç†å®Œæˆååœ¨ `catDownloads/merged/` ç›®å½•æ‰¾åˆ°åˆå¹¶åçš„MP4æ–‡ä»¶ 